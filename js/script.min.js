eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('3 1T={x:{6:{\'3N 1j\':\'3N I 1j\',\'5t Z\':\'5s Z\',\'5r Z\':\'5q Z\',\'5p 1J\':\'5o 1J\',\'3J 5n\':\'5m 5l\',\'5k 3M\':\'3M\',\'3L 5j\':\'3L 2q\',\'3K\':\'3K 5i\',\'5h 2r\':\'5g 5f\',\'3J 3I 5e\':\'3I 5d\',\'3H 2t\':\'3H 5c 2t\',\'3G 5b\':\'3G\',\'5a\':\'59\',\'3F 2p\':\'3F 58\',\'2Y 3E\':\'3E\',\'57 1K\':\'56 1K\',\'3D 1j\':\'3D\'}},11:[\'q Z\',\'q 2q\',\'q 1J\',\'q 2p\',\'q 1j\',\'q 1K\',\'q 55\',\'q 54\',\'q 2t\',\'q 2r\',\'q 53\']};k 3A=\'26\';k 1Q=\'\';k 1P=\'2c\';3 2Q=(c,d)=>{3C(d){1l\'26\':c.1n((a,b)=>(a.6>b.6)?1:((b.6>a.6)?-1:0));1O;1l\'52\':c.1n((a,b)=>(a.6<b.6)?1:((b.6<a.6)?-1:0))}J c};3 3z=(c)=>{k 1m;g(1P!==\'2c\'){1m=c.Q(({6,f})=>f.4.H().1d()===1P.1d()&&6.H().m(1Q))}R{1m=c.Q(({6})=>6.H().m(1Q))}g(!1m.B){1r.n=\'<p Y="51-4Z">4Y 4X</p>\'}R{1Y(1m)}};3 12=(3B,d,c)=>{3C(3B){1l\'2z\':3A=d.H();1O;1l\'4\':1Q=d.H();1O;1l\'2x\':1P=d.H();1O}3z(c)};3 1f=5.7(\'.4W\');3 3v=5.7(\'.4V\');3 3b=5.7(\'.4U\');3 2s=5.7(\'.4T\');3 3u=5.7(\'.4S\');3 G=5.7(\'.4R\');3 3t=5.7(\'.4Q\');3 F=5.7(\'.4P\');3 1h=5.7(\'.4O\');3 1g=5.7(\'.4N\');3 1i=5.7(\'.4M\');3 1H=5.7(\'.4L\');3 1I=5.7(\'.4K\');3 1N=5.7(\'#17\');3 3e=()=>{5.23.s.3x=\'4J\';1f.4I();1N.s.3w=\'0\'};3 2d=()=>{G.1G.u.U(\'1F\');G.1E=3y;F.1G.u.U(\'1F\');F.1E=3y;1g.s.16=\'1X\';1I.E=\'\';1i.E=\'\';1H.1D=\'\';5.23.s.3x=\'4H\';1N.s.16=\'1X\';1N.s.3w=\'1\';1f.4G()};3 3c=(e)=>{3 1k=3v.4F();g(((e.1M!==0&&e.1M<1k.4E)||(e.1M!==0&&e.1M>1k.4D)||(e.1L!==0&&e.1L<1k.4C)||(e.1L!==0&&e.1L>1k.4B))&&(e.z!==1g)){2d()}};3 3k=(8,A)=>{3{1C,6,f,i,h}=8;2s.E=1C.1d();2s.39=6;3u.n=6;G.n=`<w d=\'${f.4}\'2b>${f.4}</w>`;3t.n=i;F.n=`<w d=\'${h.H()}\'2b>${h}</w>`;1h.n=A};3 3j=(8)=>{g(8.f.4!==\'j\'){3 3s=[\'1j\',\'2r\',\'1K\',\'1J\',\'Z\',\'2q\',\'2p\'];k{4,D}=8.f;4=4.36(\'q\')[1].1d();3 3r=`../O/2o/${4}.2n`;1f.s.4A(\'::4z\',\'4y-4x: #4w\');1I.E=3s.m(4)?3r:`../O/2o/3q.2n`;1i.E=`../O/1i/${4}.3p`;1H.1D=D!==\'j\'?D:\'3o 3n 3m\'}R{1I.E=`../O/2o/3q.2n`;1i.E=`../O/4v.3p`;1H.1D=\'3o 3n 3m\'}};3 3h=(e)=>{e.14();G.1G.u.K(\'1F\');G.1E=20;F.1G.u.K(\'1F\');F.1E=20;1g.s.16=\'2N\'};3 3g=(e,8)=>{e.14();8.f=1s.1u((1t)=>1t.4===e.z.d);1h.1D=\'2m 2l 2k 2j 2i N 2h 2g, A 2f 2e:\';1h.n=\'2m 2l 2k 2j 2i N 2h 2g, A 2f 2e: <3l>\'+1o(1a,8)};3 3f=(e,8)=>{e.14();8.h=e.z.d===\'4u\'||e.z.d===\'4t\'?\'j\':\'3i\';1h.n=\'2m 2l 2k 2j 2i N 2h 2g, A 2f 2e: <3l>\'+1o(1a,8)};3 3d=(8,A)=>{3k(8,A);3j(8);1s.T((e)=>(G.n+=`<w d=\'${e.4}\'>${e.4}</w>`));[\'4s\',\'3i\'].T((e)=>(F.n+=`<w d=\'${e.H()}\'>${e}</w>`));1g.r(\'S\',3h);G.r(\'1p\',(e)=>3g(e,8));F.r(\'1p\',(e)=>3f(e,8))};3 3a=(8)=>{g(8){3e();3 A=1o(1a,8);3d(8,A)}};1f.r(\'S\',3c);3b.r(\'S\',2d);3 1Y=(c)=>{1r.n=\'\';c.T((8)=>{3{6,1C}=8;3 1e=5.1B(\'4r\');1e.u.K(\'4q\',\'4p\');1e.r(\'S\',()=>3a(8));1e.n+=`<X Y=\'4o 4n\'><X Y=\'4m\'><O Y=\'O\'E=\'${1C}\'39=\'${6}\'4l=\'38\'4k=\'38\'></X><X Y=\'4j\'><p Y=\'4i\'>${6}</p></X></X>`;1r.2a(1e)})};3 2B=(c)=>{3 15=5.1B(\'15\');3 37=5.1B(\'4h\');37.1y=\'13\';3 W=5.1B(\'4g\');W.4f=\'13\';W.u.K(\'4e\');W.n=`<w d=\'2c\'2b>4d</w>`;c.T(({4})=>W.n+=`<w d=\'${4}\'>${4}</w>`);15.2a(W);2M.2a(15)};k 1a;k 1s;3 1x=5.7(\'#1x\');3 2P=V()=>{3{v}=L 28.27(\'2W://4c.2V/2U/4b/4a\');1x.d+=1R.2S(1.2R);J v};3 35=V(1z,C)=>{k y=[];1y(3 f N 1z){3{v}=L 28.27(f);y.1b({4:v.4.36(\'N\')[0].1d(),D:v.D?v.D:\'j\'})}g(y.B>1){k 29=y.1u((e)=>e.4.m(C));y=[29?29:y[0]]}J y};3 2T=V(v,C)=>{1y(k{1z,1c,i,h,2Z,1A}N v){g(1A&&1A.B>0&&1A[0]!==\'\'){k y=L 35(1z,C);g(i){i=i.34(0,i.33(\'32\')+2);g(i[0].31(/^[1-9][0-9]*$/))i=\'30 \'+i}g(h){h=h.34(0,h.33(\'32\')+2);g(h[0].31(/^[1-9][0-9]*$/))h=\'30 \'+h}3 P=2Z.1u((e)=>e.m(\'49\')||e.m(\'48\')||e.m(\'47\')||e.m(\'46\')||e.m(\'2X\')||e.m(\'2Y\')||e.m(\'2X\'));J{f:y.B>0?y[0]:{4:\'j\',D:\'j\'},1c:1c?1c:\'j\',i:i?i:\'j\',h:h?h:\'j\',P:P?P:\'\'}}}};3 2O=V(c)=>{k l=[];k t=[];1y(k x N c){3 4=1T.x.6[x.6];x.6=4?4:x.6;3{C,6}=x;L 28.27(\'2W://45.2V/2U/24?4=\'+6).2C(V({v})=>{g(v&&v.B>0){3 M=L 2T(v,C);g(M){l.1b({...x,...M});t.1b(M.f)}}R{3 M={f:{4:\'j\',D:\'j\'},1c:\'j\',i:\'j\',h:\'j\'};l.1b({...x,...M});t.1b(M.f)}1x.d+=1R.2S(1.2R)})}l=l.Q((1v,1w)=>1w===l.1S((o)=>1v.6===o.6));l=2Q(l,\'26\');t=t.Q((1v,1w)=>1w===t.1S((o)=>1v.4===o.4));t.1n((a,b)=>(a.4>b.4?1:b.4>a.4?-1:0));l.T((e)=>{g(e.f.4===\'j\'){3 25=t.1u((1t)=>e.C!==\'\'&&1t.4.m(e.C));e.f=25?25:e.f}});1a=l;1s=t;J{l,t}};3 2D=V()=>{3 24=L 2P();J L 2O(24)};3 17=5.7(\'#17\');17.s.16=\'2N\';3 2A=5.7(\'.44\');3 1r=5.7(\'.43\');3 2M=5.7(\'.2L\');3 22=5.7(\'.42\');3 1q=5.7(\'.41\');3 1Z=5.7(\'.2L\');40.r(\'21\',()=>{k 19=5.7(\'.3Z\');g(5.23.2K>50||5.3Y.2K>50){g(5.7(\'.2J\').2I<2H){19.u.K(\'19\')}22.u.K(\'21\')}R{g(5.7(\'.2J\').2I>2H){19.u.U(\'19\')}22.u.U(\'21\')}});k 18=20;1q.r(\'S\',()=>{18?1Z.u.U(\'2G\'):1Z.u.K(\'2G\');18?(1q.s.2F=\'2E(0)\'):(1q.s.2F=\'2E(3X)\');18=!18});2D().2C(({l,t})=>{1Y(l);2B(t);17.s.16=\'1X\';2A.U();3 1U=5.7(\'.2y\');3 13=5.7(\'#13\');3 1W=5.7(\'#1W\');3 1V=5.7(\'#1V\');1W.r(\'1p\',({z})=>12(\'2z\',z.d,l));5.3W(\'15\').T(e=>e.r(\'3V\',(e)=>e.14()));1U.r(\'2y\',(e)=>{e.14();12(\'4\',e.z.d,l)});13.r(\'1p\',({z})=>12(\'2x\',z.d,l));1V.r(\'S\',()=>{1U.d=\'\';12(\'4\',\'\',l)})});3 1o=(c,8)=>{k 10;3 11=1T.11;c=c.Q(({f,h})=>11.m(f.4)&&h===\'j\');g(!c.m(8)){g(8.h!==\'j\')10=(\'2w, 2v x 2u 3U\');g(!11.m(8.f.4))10=(\'2w, 2v x 2u 3T 3S 3R q\')}R{c=c.Q(({P})=>P!==\'\');c.1n((a,b)=>(a.i<b.i)?1:((b.i<a.i)?-1:0));3 B=c.B;c=c.1S(({6})=>6===8.6);10=((((1/B)*3Q)+1R.3P(c)).3O(2)+\'%\')}J 10};',62,340,'|||const|name|document|fullName|querySelector|hero||||list|value||house|if|died|born|Unknown|let|characterList|includes|innerHTML|||House|addEventListener|style|houseList|classList|data|option|character|houseInfo|target|chance|length|lastName|words|src|heroDied|heroHouse|toLowerCase||return|add|await|addon|of|img|title|filter|else|click|forEach|remove|async|familiesList|div|class|Stark|winner|greatHouses|handleFilter|houseSort|preventDefault|form|display|root|isOpen|mainNew|globalCharacterList|push|gender|trim|charactersItem|modalHero|changeBtn|heroChance|houseLogo|Baratheon|dialogDimensions|case|filteredCharacters|sort|winChance|change|dropdown|charactersList|globalHousesList|el|find|obj|index|loaderBar|for|allegiances|tvSeries|createElement|imageUrl|textContent|disabled|editable|parentElement|houseWords|modalImg|Lannister|Greyjoy|clientY|clientX|rootEl|break|houseSortValue|nameSortValue|Math|findIndex|CONSTANTS|nameFind|clearInput|alphabetSort|block|renderCharacters|filterBlock|false|scroll|headerFixed|body|characters|findHouse|asc|get|axios|uniqueHouse|append|selected|all|closeModal|be|will|book|original|author|an|was|you|If|svg|houseSVG|Tyrell|Targaryen|Bolton|heroImage|Martell|is|your|Sorry|houses|input|alphabetic|loader|renderFamiliesList|then|getFullInfo|rotate|transform|active|560|clientHeight|container|scrollTop|filter__block|inputBlock|none|getAdditionalInfo|getCharactersList|handleAlphabetFilter|85|round|setDataFromAPI|api|com|https|Ser|Lord|titles|In|match|AC|indexOf|substring|getHousesList|split|familyLabel|150|alt|handleModal|modalClose|handleOutsideClick|renderModalData|openModal|handleDiedChange|handleHouseChange|handleChangeBtnClick|Died|updateModalImg|setHeroProperties|br|Thrones|Of|Game|png|throne|imageBackground|files|heroBorn|heroName|modalWrapper|opacity|overflow|true|characterFilter|alphabetSortValue|type|switch|Gendry|Bronn|Olenna|Tormund|Oberyn|High|The|Daario|Viserys|Drogo|Robert|toFixed|abs|100|Great|from|not|dead|submit|querySelectorAll|180deg|documentElement|main|window|header__dropdown|header__fixed|characters__list|loader__wrapper|anapioficeandfire|Prince|Princess|Queen|King|Characters|v2|thronesapi|All|filter__house|id|select|label|card__text|card__description|height|width|card__img|blur|card__body|card|list__card|li|Alive|unknown|alive|logo|2c2c2c|color|background|backdrop|setProperty|bottom|top|right|left|getBoundingClientRect|close|auto|showModal|hidden|modal__background|coatOfArms__text|house__logo|character__change|character__chance|character__died|character__born|character__house|character__name|character__image|modal__close|modal__contant|modal|matches|No|results||no|desc|Baelish|Mormont|Tully|Asha|Yara|Redwyne|Walder|Hodor|Giantsbane|Nymeros|Septon|Sparrow|Snow|Ramsay|Ramsey|Naharis|Targaryn|Khal|Clegane|Sandor|Hound|Jaime|Jamie|Robb|Rob|Eddard|Ned'.split('|'),0,{}))

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnN0YW50cy5qcyIsImZpbHRlci5qcyIsImhlcm8tbW9kYWwuanMiLCJyZW5kZXIuanMiLCJyZXF1ZXN0cy5qcyIsInNjcmlwdC5qcyIsIndpbkNoYW5jZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQ09OU1RBTlRTID0ge1xuICBjaGFyYWN0ZXI6IHtcbiAgICBmdWxsTmFtZToge1xuICAgICAgJ1JvYmVydCBCYXJhdGhlb24nOiAnUm9iZXJ0IEkgQmFyYXRoZW9uJyxcbiAgICAgICdOZWQgU3RhcmsnOiAnRWRkYXJkIFN0YXJrJyxcbiAgICAgICdSb2IgU3RhcmsnOiAnUm9iYiBTdGFyaycsXG4gICAgICAnSmFtaWUgTGFubmlzdGVyJzogJ0phaW1lIExhbm5pc3RlcicsXG4gICAgICAnVGhlIEhvdW5kJzogJ1NhbmRvciBDbGVnYW5lJyxcbiAgICAgICdLaGFsIERyb2dvJzogJ0Ryb2dvJyxcbiAgICAgICdWaXNlcnlzIFRhcmdhcnluJzogJ1Zpc2VyeXMgVGFyZ2FyeWVuJyxcbiAgICAgICdEYWFyaW8nOiAnRGFhcmlvIE5haGFyaXMnLFxuICAgICAgJ1JhbXNleSBCb2x0b24nOiAnUmFtc2F5IFNub3cnLFxuICAgICAgJ1RoZSBIaWdoIFNwYXJyb3cnOiAnSGlnaCBTZXB0b24nLFxuICAgICAgJ09iZXJ5biBNYXJ0ZWxsJzogJ09iZXJ5biBOeW1lcm9zIE1hcnRlbGwnLFxuICAgICAgJ1Rvcm11bmQgR2lhbnRzYmFuZSc6ICdUb3JtdW5kJyxcbiAgICAgICdIb2Rvcic6ICdXYWxkZXInLFxuICAgICAgJ09sZW5uYSBUeXJlbGwnOiAnT2xlbm5hIFJlZHd5bmUnLFxuICAgICAgJ0xvcmQgQnJvbm4nOiAnQnJvbm4nLFxuICAgICAgJ1lhcmEgR3JleWpveSc6ICdBc2hhIEdyZXlqb3knLFxuICAgICAgJ0dlbmRyeSBCYXJhdGhlb24nOiAnR2VuZHJ5J1xuICAgIH1cbiAgfSxcbiAgZ3JlYXRIb3VzZXM6IFtcbiAgICAnSG91c2UgU3RhcmsnLFxuICAgICdIb3VzZSBUYXJnYXJ5ZW4nLFxuICAgICdIb3VzZSBMYW5uaXN0ZXInLFxuICAgICdIb3VzZSBUeXJlbGwnLFxuICAgICdIb3VzZSBCYXJhdGhlb24nLFxuICAgICdIb3VzZSBHcmV5am95JyxcbiAgICAnSG91c2UgVHVsbHknLFxuICAgICdIb3VzZSBNb3Jtb250JyxcbiAgICAnSG91c2UgTWFydGVsbCcsXG4gICAgJ0hvdXNlIEJvbHRvbicsXG4gICAgJ0hvdXNlIEJhZWxpc2gnXG4gIF1cbn07IiwiLy89PT09PT09PT09PT09Y2hhcmFjdGVyIGZpbHRlcj09PT09PT09PT09PT09PT09PS8vXG5sZXQgYWxwaGFiZXRTb3J0VmFsdWUgPSAnYXNjJztcbmxldCBuYW1lU29ydFZhbHVlID0gJyc7XG5sZXQgaG91c2VTb3J0VmFsdWUgPSAnYWxsJztcblxuY29uc3QgaGFuZGxlQWxwaGFiZXRGaWx0ZXIgPSAobGlzdCwgdmFsdWUpID0+IHtcbiAgc3dpdGNoICh2YWx1ZSkge1xuICAgIGNhc2UgJ2FzYyc6XG4gICAgICBsaXN0LnNvcnQoKGEsIGIpID0+XG4gICAgICAgIChhLmZ1bGxOYW1lID4gYi5mdWxsTmFtZSkgPyAxIDogKChiLmZ1bGxOYW1lID4gYS5mdWxsTmFtZSkgPyAtMSA6IDApKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Rlc2MnOlxuICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PlxuICAgICAgICAoYS5mdWxsTmFtZSA8IGIuZnVsbE5hbWUpID8gMSA6ICgoYi5mdWxsTmFtZSA8IGEuZnVsbE5hbWUpID8gLTEgOiAwKSk7XG4gIH1cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5jb25zdCBjaGFyYWN0ZXJGaWx0ZXIgPSAobGlzdCkgPT4ge1xuICBsZXQgZmlsdGVyZWRDaGFyYWN0ZXJzO1xuXG4gIGlmIChob3VzZVNvcnRWYWx1ZSAhPT0gJ2FsbCcpIHtcbiAgICBmaWx0ZXJlZENoYXJhY3RlcnMgPSBsaXN0LmZpbHRlcigoeyBmdWxsTmFtZSwgaG91c2UgfSkgPT5cbiAgICAgIGhvdXNlLm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGhvdXNlU29ydFZhbHVlLnRyaW0oKVxuICAgICAgJiZcbiAgICAgIGZ1bGxOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmFtZVNvcnRWYWx1ZSlcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGZpbHRlcmVkQ2hhcmFjdGVycyA9IGxpc3QuZmlsdGVyKCh7IGZ1bGxOYW1lIH0pID0+XG4gICAgICBmdWxsTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWVTb3J0VmFsdWUpKTtcbiAgfVxuXG4gIGlmICghZmlsdGVyZWRDaGFyYWN0ZXJzLmxlbmd0aCkge1xuICAgIGNoYXJhY3RlcnNMaXN0LmlubmVySFRNTCA9ICc8cCBjbGFzcz1cIm5vLXJlc3VsdHNcIj5ObyBtYXRjaGVzPC9wPic7XG4gIH0gZWxzZSB7XG4gICAgcmVuZGVyQ2hhcmFjdGVycyhmaWx0ZXJlZENoYXJhY3RlcnMpO1xuICB9XG59O1xuXG5jb25zdCBoYW5kbGVGaWx0ZXIgPSAodHlwZSwgdmFsdWUsIGxpc3QpID0+IHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnYWxwaGFiZXRpYyc6XG4gICAgICBhbHBoYWJldFNvcnRWYWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICduYW1lJzpcbiAgICAgIG5hbWVTb3J0VmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnaG91c2VzJzpcbiAgICAgIGhvdXNlU29ydFZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgY2hhcmFjdGVyRmlsdGVyKGxpc3QpO1xufTtcbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuIiwiY29uc3QgbW9kYWxIZXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG5jb25zdCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2NvbnRhbnQnKTtcbmNvbnN0IG1vZGFsQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG5cbmNvbnN0IGhlcm9JbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXJfX2ltYWdlJyk7XG5jb25zdCBoZXJvTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXJfX25hbWUnKTtcbmNvbnN0IGhlcm9Ib3VzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXJfX2hvdXNlJyk7XG5jb25zdCBoZXJvQm9ybiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXJfX2Jvcm4nKTtcbmNvbnN0IGhlcm9EaWVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXJhY3Rlcl9fZGllZCcpO1xuY29uc3QgaGVyb0NoYW5jZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXJfX2NoYW5jZScpO1xuXG5jb25zdCBjaGFuZ2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhcmFjdGVyX19jaGFuZ2UnKTtcblxuY29uc3QgaG91c2VMb2dvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvdXNlX19sb2dvJyk7XG5jb25zdCBob3VzZVdvcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvYXRPZkFybXNfX3RleHQnKTtcbmNvbnN0IG1vZGFsSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19iYWNrZ3JvdW5kJyk7XG5jb25zdCByb290RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcm9vdCcpO1xuXG5jb25zdCBvcGVuTW9kYWwgPSAoKSA9PiB7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgbW9kYWxIZXJvLnNob3dNb2RhbCgpO1xuICAvLyByb290RWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgcm9vdEVsLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cbn07XG5cbmNvbnN0IGNsb3NlTW9kYWwgPSAoKSA9PiB7XG4gIGhlcm9Ib3VzZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2VkaXRhYmxlJyk7XG4gIGhlcm9Ib3VzZS5kaXNhYmxlZCA9IHRydWU7XG4gIGhlcm9EaWVkLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZWRpdGFibGUnKTtcbiAgaGVyb0RpZWQuZGlzYWJsZWQgPSB0cnVlO1xuICBjaGFuZ2VCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIG1vZGFsSW1nLnNyYyA9ICcnO1xuICBob3VzZUxvZ28uc3JjID0gJyc7XG4gIGhvdXNlV29yZHMudGV4dENvbnRlbnQgPSAnJztcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcbiAgcm9vdEVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICByb290RWwuc3R5bGUub3BhY2l0eSA9ICcxJztcblxuICBtb2RhbEhlcm8uY2xvc2UoKTtcbn07XG5cbi8vIEhhbmRsZSBjbGljayBvdXRzaWRlIHRoZSBtb2RhbCBjb250YWluZXJcbmNvbnN0IGhhbmRsZU91dHNpZGVDbGljayA9IChlKSA9PiB7XG4gIGNvbnN0IGRpYWxvZ0RpbWVuc2lvbnMgPSBtb2RhbFdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgaWYgKFxuICAgICgoZS5jbGllbnRYICE9PSAwICYmIGUuY2xpZW50WCA8IGRpYWxvZ0RpbWVuc2lvbnMubGVmdCkgfHxcbiAgICAgIChlLmNsaWVudFggIT09IDAgJiYgZS5jbGllbnRYID4gZGlhbG9nRGltZW5zaW9ucy5yaWdodCkgfHxcbiAgICAgIChlLmNsaWVudFkgIT09IDAgJiYgZS5jbGllbnRZIDwgZGlhbG9nRGltZW5zaW9ucy50b3ApIHx8XG4gICAgICAoZS5jbGllbnRZICE9PSAwICYmIGUuY2xpZW50WSA+IGRpYWxvZ0RpbWVuc2lvbnMuYm90dG9tKSkgJiZcbiAgICAoZS50YXJnZXQgIT09IGNoYW5nZUJ0bilcbiAgKSB7XG4gICAgY2xvc2VNb2RhbCgpO1xuICB9XG59O1xuXG5jb25zdCBzZXRIZXJvUHJvcGVydGllcyA9IChoZXJvLCBjaGFuY2UpID0+IHtcbiAgY29uc3QgeyBpbWFnZVVybCwgZnVsbE5hbWUsIGhvdXNlLCBib3JuLCBkaWVkIH0gPSBoZXJvO1xuXG4gIGhlcm9JbWFnZS5zcmMgPSBpbWFnZVVybC50cmltKCk7XG4gIGhlcm9JbWFnZS5hbHQgPSBmdWxsTmFtZTtcbiAgaGVyb05hbWUuaW5uZXJIVE1MID0gZnVsbE5hbWU7XG4gIGhlcm9Ib3VzZS5pbm5lckhUTUwgPSBgPG9wdGlvbiB2YWx1ZT0nJHtob3VzZS5uYW1lfScgc2VsZWN0ZWQ+JHtob3VzZS5uYW1lfTwvb3B0aW9uPmA7XG4gIGhlcm9Cb3JuLmlubmVySFRNTCA9IGJvcm47XG4gIGhlcm9EaWVkLmlubmVySFRNTCA9IGA8b3B0aW9uIHZhbHVlPScke2RpZWQudG9Mb3dlckNhc2UoKX0nIHNlbGVjdGVkPiR7ZGllZH08L29wdGlvbj5gO1xuICBoZXJvQ2hhbmNlLmlubmVySFRNTCA9IGNoYW5jZTtcbn07XG5cbmNvbnN0IHVwZGF0ZU1vZGFsSW1nID0gKGhlcm8pID0+IHtcbiAgaWYgKGhlcm8uaG91c2UubmFtZSAhPT0gJ1Vua25vd24nKSB7XG4gICAgY29uc3QgZmlsZXMgPSBbJ0JhcmF0aGVvbicsICdCb2x0b24nLCAnR3JleWpveScsICdMYW5uaXN0ZXInLCAnU3RhcmsnLCAnVGFyZ2FyeWVuJywgJ1R5cmVsbCddO1xuICAgIGxldCB7IG5hbWUsIHdvcmRzIH0gPSBoZXJvLmhvdXNlO1xuXG4gICAgbmFtZSA9IG5hbWUuc3BsaXQoJ0hvdXNlJylbMV0udHJpbSgpO1xuXG4gICAgY29uc3QgaW1hZ2VCYWNrZ3JvdW5kID0gYC4uL2ltZy9ob3VzZVNWRy8ke25hbWV9LnN2Z2A7XG5cbiAgICBtb2RhbEhlcm8uc3R5bGUuc2V0UHJvcGVydHkoJzo6YmFja2Ryb3AnLCAnYmFja2dyb3VuZC1jb2xvcjogIzJjMmMyYycpO1xuICAgIG1vZGFsSW1nLnNyYyA9IGZpbGVzLmluY2x1ZGVzKG5hbWUpID8gaW1hZ2VCYWNrZ3JvdW5kIDogYC4uL2ltZy9ob3VzZVNWRy90aHJvbmUuc3ZnYDtcbiAgICBob3VzZUxvZ28uc3JjID0gYC4uL2ltZy9ob3VzZUxvZ28vJHtuYW1lfS5wbmdgO1xuICAgIGhvdXNlV29yZHMudGV4dENvbnRlbnQgPSB3b3JkcyAhPT0gJ1Vua25vd24nID8gd29yZHMgOiAnR2FtZSBPZiBUaHJvbmVzJztcbiAgfSBlbHNlIHtcbiAgICBtb2RhbEltZy5zcmMgPSBgLi4vaW1nL2hvdXNlU1ZHL3Rocm9uZS5zdmdgO1xuICAgIGhvdXNlTG9nby5zcmMgPSBgLi4vaW1nL2xvZ28ucG5nYDtcbiAgICBob3VzZVdvcmRzLnRleHRDb250ZW50ID0gJ0dhbWUgT2YgVGhyb25lcyc7XG4gIH1cbn07XG5cbmNvbnN0IGhhbmRsZUNoYW5nZUJ0bkNsaWNrID0gKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBoZXJvSG91c2UucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlZGl0YWJsZScpO1xuICBoZXJvSG91c2UuZGlzYWJsZWQgPSBmYWxzZTtcbiAgaGVyb0RpZWQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlZGl0YWJsZScpO1xuICBoZXJvRGllZC5kaXNhYmxlZCA9IGZhbHNlO1xuICBjaGFuZ2VCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbn07XG5cbmNvbnN0IGhhbmRsZUhvdXNlQ2hhbmdlID0gKGUsIGhlcm8pID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBoZXJvLmhvdXNlID0gZ2xvYmFsSG91c2VzTGlzdC5maW5kKChlbCkgPT4gZWwubmFtZSA9PT0gZS50YXJnZXQudmFsdWUpO1xuICBoZXJvQ2hhbmNlLnRleHRDb250ZW50ID0gJ0lmIHlvdSB3YXMgYW4gYXV0aG9yIG9mIG9yaWdpbmFsIGJvb2ssIGNoYW5jZSB3aWxsIGJlOic7XG5cbiAgaGVyb0NoYW5jZS5pbm5lckhUTUwgPVxuICAgICdJZiB5b3Ugd2FzIGFuIGF1dGhvciBvZiBvcmlnaW5hbCBib29rLCBjaGFuY2Ugd2lsbCBiZTogPGJyPicgK1xuICAgIHdpbkNoYW5jZShnbG9iYWxDaGFyYWN0ZXJMaXN0LCBoZXJvKTtcbn07XG5cbmNvbnN0IGhhbmRsZURpZWRDaGFuZ2UgPSAoZSwgaGVybykgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGhlcm8uZGllZCA9IGUudGFyZ2V0LnZhbHVlID09PSAnYWxpdmUnIHx8IGUudGFyZ2V0LnZhbHVlID09PSAndW5rbm93bicgPyAnVW5rbm93bicgOiAnRGllZCc7XG4gIGhlcm9DaGFuY2UuaW5uZXJIVE1MID1cbiAgICAnSWYgeW91IHdhcyBhbiBhdXRob3Igb2Ygb3JpZ2luYWwgYm9vaywgY2hhbmNlIHdpbGwgYmU6IDxicj4nICtcbiAgICB3aW5DaGFuY2UoZ2xvYmFsQ2hhcmFjdGVyTGlzdCwgaGVybyk7XG59O1xuY29uc3QgcmVuZGVyTW9kYWxEYXRhID0gKGhlcm8sIGNoYW5jZSkgPT4ge1xuXG4gIHNldEhlcm9Qcm9wZXJ0aWVzKGhlcm8sIGNoYW5jZSk7XG4gIHVwZGF0ZU1vZGFsSW1nKGhlcm8pO1xuXG4gIGdsb2JhbEhvdXNlc0xpc3QuZm9yRWFjaChcbiAgICAoZSkgPT5cbiAgICAgIChoZXJvSG91c2UuaW5uZXJIVE1MICs9IGA8b3B0aW9uIHZhbHVlPScke2UubmFtZX0nPiR7ZS5uYW1lfTwvb3B0aW9uPmApXG4gICk7XG5cbiAgWydBbGl2ZScsICdEaWVkJ10uZm9yRWFjaChcbiAgICAoZSkgPT5cbiAgICAgIChoZXJvRGllZC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9JyR7ZS50b0xvd2VyQ2FzZSgpfSc+JHtlfTwvb3B0aW9uPmApXG4gICk7XG5cbiAgY2hhbmdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2hhbmdlQnRuQ2xpY2spO1xuICBoZXJvSG91c2UuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IGhhbmRsZUhvdXNlQ2hhbmdlKGUsIGhlcm8pKTtcbiAgaGVyb0RpZWQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IGhhbmRsZURpZWRDaGFuZ2UoZSwgaGVybykpO1xufTtcblxuLyoqKioqKioqKioqKioqKioqKiogU2V0dXAgTW9kYWwgT24gQ2xpY2sgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5jb25zdCBoYW5kbGVNb2RhbCA9IChoZXJvKSA9PiB7XG4gIGlmIChoZXJvKSB7XG4gICAgb3Blbk1vZGFsKCk7XG5cbiAgICBjb25zdCBjaGFuY2UgPSB3aW5DaGFuY2UoZ2xvYmFsQ2hhcmFjdGVyTGlzdCwgaGVybyk7XG4gICAgcmVuZGVyTW9kYWxEYXRhKGhlcm8sIGNoYW5jZSk7XG4gIH1cbn07XG5cbm1vZGFsSGVyby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU91dHNpZGVDbGljayk7XG5tb2RhbENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbCk7IiwiY29uc3QgcmVuZGVyQ2hhcmFjdGVycyA9IChsaXN0KSA9PiB7XG4gIGNoYXJhY3RlcnNMaXN0LmlubmVySFRNTCA9ICcnO1xuXG4gIGxpc3QuZm9yRWFjaCgoaGVybykgPT4ge1xuICAgIGNvbnN0IHsgZnVsbE5hbWUsIGltYWdlVXJsIH0gPSBoZXJvO1xuICAgIGNvbnN0IGNoYXJhY3RlcnNJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgIGNoYXJhY3RlcnNJdGVtLmNsYXNzTGlzdC5hZGQoJ2xpc3RfX2NhcmQnLCAnY2FyZCcpO1xuICAgIGNoYXJhY3RlcnNJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaGFuZGxlTW9kYWwoaGVybykpO1xuICAgIGNoYXJhY3RlcnNJdGVtLmlubmVySFRNTCArPSBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J2NhcmRfX2JvZHkgYmx1cic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSdjYXJkX19pbWcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9J2ltZycgc3JjPScke2ltYWdlVXJsfScgYWx0PScke2Z1bGxOYW1lfScgd2lkdGg9JzE1MCcgaGVpZ2h0PScxNTAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSdjYXJkX19kZXNjcmlwdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9J2NhcmRfX3RleHQnPiR7ZnVsbE5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgY2hhcmFjdGVyc0xpc3QuYXBwZW5kKGNoYXJhY3RlcnNJdGVtKTtcbiAgfSk7XG59O1xuXG5jb25zdCByZW5kZXJGYW1pbGllc0xpc3QgPSAobGlzdCkgPT4ge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuXG4gIGNvbnN0IGZhbWlseUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgZmFtaWx5TGFiZWwuZm9yID0gJ2hvdXNlU29ydCc7XG5cbiAgY29uc3QgZmFtaWxpZXNMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gIGZhbWlsaWVzTGlzdC5pZCA9ICdob3VzZVNvcnQnO1xuICBmYW1pbGllc0xpc3QuY2xhc3NMaXN0LmFkZCgnZmlsdGVyX19ob3VzZScpO1xuICBmYW1pbGllc0xpc3QuaW5uZXJIVE1MID0gYDxvcHRpb24gdmFsdWU9J2FsbCcgc2VsZWN0ZWQ+QWxsPC9vcHRpb24+YDtcblxuICBsaXN0LmZvckVhY2goKHsgbmFtZSB9KSA9PiBmYW1pbGllc0xpc3QuaW5uZXJIVE1MICs9IGA8b3B0aW9uIHZhbHVlPScke25hbWV9Jz4ke25hbWV9PC9vcHRpb24+YCk7XG4gIGZvcm0uYXBwZW5kKGZhbWlsaWVzTGlzdCk7XG5cbiAgaW5wdXRCbG9jay5hcHBlbmQoZm9ybSk7XG59OyIsImxldCBnbG9iYWxDaGFyYWN0ZXJMaXN0O1xubGV0IGdsb2JhbEhvdXNlc0xpc3Q7XG5jb25zdCBsb2FkZXJCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9hZGVyQmFyJyk7XG5cbmNvbnN0IGdldENoYXJhY3RlcnNMaXN0ID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cHM6Ly90aHJvbmVzYXBpLmNvbS9hcGkvdjIvQ2hhcmFjdGVycycpO1xuICBsb2FkZXJCYXIudmFsdWUgKz0gTWF0aC5yb3VuZCgxLjg1KTtcbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5jb25zdCBnZXRIb3VzZXNMaXN0ID0gYXN5bmMgKGFsbGVnaWFuY2VzLCBsYXN0TmFtZSkgPT4ge1xuICBsZXQgaG91c2VJbmZvID0gW107XG4gIGZvciAoY29uc3QgaG91c2Ugb2YgYWxsZWdpYW5jZXMpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChob3VzZSk7XG4gICAgaG91c2VJbmZvLnB1c2goe1xuICAgICAgbmFtZTogZGF0YS5uYW1lLnNwbGl0KCdvZicpWzBdLnRyaW0oKSxcbiAgICAgIHdvcmRzOiBkYXRhLndvcmRzID8gZGF0YS53b3JkcyA6ICdVbmtub3duJ1xuICAgIH0pO1xuICB9XG4gIGlmIChob3VzZUluZm8ubGVuZ3RoID4gMSkge1xuICAgIGxldCB1bmlxdWVIb3VzZSA9IGhvdXNlSW5mby5maW5kKChlKSA9PiBlLm5hbWUuaW5jbHVkZXMobGFzdE5hbWUpKTtcbiAgICBob3VzZUluZm8gPSBbdW5pcXVlSG91c2UgPyB1bmlxdWVIb3VzZSA6IGhvdXNlSW5mb1swXV07XG4gIH1cbiAgcmV0dXJuIGhvdXNlSW5mbztcbn07XG5cbmNvbnN0IHNldERhdGFGcm9tQVBJID0gYXN5bmMgKGRhdGEsIGxhc3ROYW1lKSA9PiB7XG4gIGZvciAobGV0IHsgYWxsZWdpYW5jZXMsIGdlbmRlciwgYm9ybiwgZGllZCwgdGl0bGVzLCB0dlNlcmllcyB9IG9mIGRhdGEpIHtcbiAgICBpZiAodHZTZXJpZXMgJiYgdHZTZXJpZXMubGVuZ3RoID4gMCAmJiB0dlNlcmllc1swXSAhPT0gJycpIHtcblxuICAgICAgbGV0IGhvdXNlSW5mbyA9IGF3YWl0IGdldEhvdXNlc0xpc3QoYWxsZWdpYW5jZXMsIGxhc3ROYW1lKTtcblxuICAgICAgaWYgKGJvcm4pIHtcbiAgICAgICAgYm9ybiA9IGJvcm4uc3Vic3RyaW5nKDAsIGJvcm4uaW5kZXhPZignQUMnKSArIDIpO1xuICAgICAgICBpZiAoYm9yblswXS5tYXRjaCgvXlsxLTldWzAtOV0qJC8pKSBib3JuID0gJ0luICcgKyBib3JuO1xuICAgICAgfVxuICAgICAgaWYgKGRpZWQpIHtcbiAgICAgICAgZGllZCA9IGRpZWQuc3Vic3RyaW5nKDAsIGRpZWQuaW5kZXhPZignQUMnKSArIDIpO1xuICAgICAgICBpZiAoZGllZFswXS5tYXRjaCgvXlsxLTldWzAtOV0qJC8pKSBkaWVkID0gJ0luICcgKyBkaWVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0aXRsZSA9IHRpdGxlcy5maW5kKFxuICAgICAgICAoZSkgPT5cbiAgICAgICAgICBlLmluY2x1ZGVzKCdLaW5nJykgfHxcbiAgICAgICAgICBlLmluY2x1ZGVzKCdRdWVlbicpIHx8XG4gICAgICAgICAgZS5pbmNsdWRlcygnUHJpbmNlc3MnKSB8fFxuICAgICAgICAgIGUuaW5jbHVkZXMoJ1ByaW5jZScpIHx8XG4gICAgICAgICAgZS5pbmNsdWRlcygnU2VyJykgfHxcbiAgICAgICAgICBlLmluY2x1ZGVzKCdMb3JkJykgfHxcbiAgICAgICAgICBlLmluY2x1ZGVzKCdTZXInKVxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhvdXNlOiBob3VzZUluZm8ubGVuZ3RoID4gMCA/IGhvdXNlSW5mb1swXSA6IHsgbmFtZTogJ1Vua25vd24nLCB3b3JkczogJ1Vua25vd24nIH0sXG4gICAgICAgIGdlbmRlcjogZ2VuZGVyID8gZ2VuZGVyIDogJ1Vua25vd24nLFxuICAgICAgICBib3JuOiBib3JuID8gYm9ybiA6ICdVbmtub3duJyxcbiAgICAgICAgZGllZDogZGllZCA/IGRpZWQgOiAnVW5rbm93bicsXG4gICAgICAgIHRpdGxlOiB0aXRsZSA/IHRpdGxlIDogJydcbiAgICAgIH07XG4gICAgfVxuICB9XG59O1xuXG5cbmNvbnN0IGdldEFkZGl0aW9uYWxJbmZvID0gYXN5bmMgKGxpc3QpID0+IHtcbiAgbGV0IGNoYXJhY3Rlckxpc3QgPSBbXTtcbiAgbGV0IGhvdXNlTGlzdCA9IFtdO1xuICBmb3IgKGxldCBjaGFyYWN0ZXIgb2YgbGlzdCkge1xuICAgIGNvbnN0IG5hbWUgPSBDT05TVEFOVFMuY2hhcmFjdGVyLmZ1bGxOYW1lW2NoYXJhY3Rlci5mdWxsTmFtZV07XG4gICAgY2hhcmFjdGVyLmZ1bGxOYW1lID0gbmFtZSA/IG5hbWUgOiBjaGFyYWN0ZXIuZnVsbE5hbWU7XG4gICAgY29uc3QgeyBsYXN0TmFtZSwgZnVsbE5hbWUgfSA9IGNoYXJhY3RlcjtcblxuICAgIGF3YWl0IGF4aW9zXG4gICAgICAuZ2V0KCdodHRwczovL2FuYXBpb2ZpY2VhbmRmaXJlLmNvbS9hcGkvY2hhcmFjdGVycz9uYW1lPScgKyBmdWxsTmFtZSlcbiAgICAgIC50aGVuKGFzeW5jICh7IGRhdGEgfSkgPT4ge1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgIGNvbnN0IGFkZG9uID0gYXdhaXQgc2V0RGF0YUZyb21BUEkoZGF0YSwgbGFzdE5hbWUpO1xuICAgICAgICAgIGlmIChhZGRvbikge1xuICAgICAgICAgICAgY2hhcmFjdGVyTGlzdC5wdXNoKHsgLi4uY2hhcmFjdGVyLCAuLi5hZGRvbiB9KTtcbiAgICAgICAgICAgIGhvdXNlTGlzdC5wdXNoKGFkZG9uLmhvdXNlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBhZGRvbiA9IHtcbiAgICAgICAgICAgIGhvdXNlOiB7IG5hbWU6ICdVbmtub3duJywgd29yZHM6ICdVbmtub3duJyB9LFxuICAgICAgICAgICAgZ2VuZGVyOiAnVW5rbm93bicsXG4gICAgICAgICAgICBib3JuOiAnVW5rbm93bicsXG4gICAgICAgICAgICBkaWVkOiAnVW5rbm93bidcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY2hhcmFjdGVyTGlzdC5wdXNoKHsgLi4uY2hhcmFjdGVyLCAuLi5hZGRvbiB9KTtcbiAgICAgICAgICBob3VzZUxpc3QucHVzaChhZGRvbi5ob3VzZSk7XG4gICAgICAgIH1cbiAgICAgICAgbG9hZGVyQmFyLnZhbHVlICs9IE1hdGgucm91bmQoMS44NSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGNoYXJhY3Rlckxpc3QgPSBjaGFyYWN0ZXJMaXN0LmZpbHRlcihcbiAgICAob2JqLCBpbmRleCkgPT4gaW5kZXggPT09IGNoYXJhY3Rlckxpc3QuZmluZEluZGV4KChvKSA9PiBvYmouZnVsbE5hbWUgPT09IG8uZnVsbE5hbWUpXG4gICk7XG4gIGNoYXJhY3Rlckxpc3QgPSBoYW5kbGVBbHBoYWJldEZpbHRlcihjaGFyYWN0ZXJMaXN0LCAnYXNjJyk7XG5cbiAgaG91c2VMaXN0ID0gaG91c2VMaXN0LmZpbHRlcihcbiAgICAob2JqLCBpbmRleCkgPT4gaW5kZXggPT09IGhvdXNlTGlzdC5maW5kSW5kZXgoKG8pID0+IG9iai5uYW1lID09PSBvLm5hbWUpXG4gICk7XG5cbiAgaG91c2VMaXN0LnNvcnQoKGEsIGIpID0+IChhLm5hbWUgPiBiLm5hbWUgPyAxIDogYi5uYW1lID4gYS5uYW1lID8gLTEgOiAwKSk7XG5cbiAgY2hhcmFjdGVyTGlzdC5mb3JFYWNoKChlKSA9PiB7XG4gICAgaWYgKGUuaG91c2UubmFtZSA9PT0gJ1Vua25vd24nKSB7XG4gICAgICBjb25zdCBmaW5kSG91c2UgPSBob3VzZUxpc3QuZmluZCgoZWwpID0+IGUubGFzdE5hbWUgIT09ICcnICYmIGVsLm5hbWUuaW5jbHVkZXMoZS5sYXN0TmFtZSkpO1xuICAgICAgZS5ob3VzZSA9IGZpbmRIb3VzZSA/IGZpbmRIb3VzZSA6IGUuaG91c2U7XG4gICAgfVxuICB9KTtcbiAgZ2xvYmFsQ2hhcmFjdGVyTGlzdCA9IGNoYXJhY3Rlckxpc3Q7XG4gIGdsb2JhbEhvdXNlc0xpc3QgPSBob3VzZUxpc3Q7XG4gIHJldHVybiB7IGNoYXJhY3Rlckxpc3QsIGhvdXNlTGlzdCB9O1xufTtcblxuY29uc3QgZ2V0RnVsbEluZm8gPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGNoYXJhY3RlcnMgPSBhd2FpdCBnZXRDaGFyYWN0ZXJzTGlzdCgpO1xuICByZXR1cm4gYXdhaXQgZ2V0QWRkaXRpb25hbEluZm8oY2hhcmFjdGVycyk7XG59O1xuIiwiY29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyb290Jyk7XG5yb290LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbmNvbnN0IGxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkZXJfX3dyYXBwZXInKTtcbmNvbnN0IGNoYXJhY3RlcnNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXJhY3RlcnNfX2xpc3QnKTtcbmNvbnN0IGlucHV0QmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyX19ibG9jaycpO1xuXG5jb25zdCBoZWFkZXJGaXhlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2ZpeGVkJyk7XG5cbmNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fZHJvcGRvd24nKTtcbmNvbnN0IGZpbHRlckJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlcl9fYmxvY2snKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcbiAgbGV0IG1haW5OZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpO1xuICBpZiAoZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPiA1MCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID4gNTApIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpLmNsaWVudEhlaWdodCA8IDU2MCkge1xuICAgICAgbWFpbk5ldy5jbGFzc0xpc3QuYWRkKCdtYWluTmV3Jyk7XG4gICAgfVxuICAgIGhlYWRlckZpeGVkLmNsYXNzTGlzdC5hZGQoJ3Njcm9sbCcpO1xuICB9IGVsc2Uge1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykuY2xpZW50SGVpZ2h0ID4gNTYwKSB7XG4gICAgICBtYWluTmV3LmNsYXNzTGlzdC5yZW1vdmUoJ21haW5OZXcnKTtcbiAgICB9XG4gICAgaGVhZGVyRml4ZWQuY2xhc3NMaXN0LnJlbW92ZSgnc2Nyb2xsJyk7XG4gIH1cbn0pO1xuXG5sZXQgaXNPcGVuID0gZmFsc2U7XG5kcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgaXNPcGVuID8gZmlsdGVyQmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykgOiBmaWx0ZXJCbG9jay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgaXNPcGVuID8gKGRyb3Bkb3duLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMCknKSA6IChkcm9wZG93bi5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKDE4MGRlZyknKTtcbiAgaXNPcGVuID0gIWlzT3Blbjtcbn0pO1xuXG5nZXRGdWxsSW5mbygpLnRoZW4oKHsgY2hhcmFjdGVyTGlzdCwgaG91c2VMaXN0IH0pID0+IHtcbiAgcmVuZGVyQ2hhcmFjdGVycyhjaGFyYWN0ZXJMaXN0KTtcbiAgcmVuZGVyRmFtaWxpZXNMaXN0KGhvdXNlTGlzdCk7XG4gIHJvb3Quc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIGxvYWRlci5yZW1vdmUoKTtcblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipGSUxURVIqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBjb25zdCBuYW1lRmluZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpO1xuICBjb25zdCBob3VzZVNvcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG91c2VTb3J0Jyk7XG4gIGNvbnN0IGFscGhhYmV0U29ydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbHBoYWJldFNvcnQnKTtcbiAgY29uc3QgY2xlYXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbGVhcklucHV0Jyk7XG4gIGFscGhhYmV0U29ydC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoeyB0YXJnZXQgfSkgPT5cbiAgICBoYW5kbGVGaWx0ZXIoJ2FscGhhYmV0aWMnLCB0YXJnZXQudmFsdWUsIGNoYXJhY3Rlckxpc3QpXG4gICk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpLmZvckVhY2goZSA9PlxuICAgIGUuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSkpO1xuXG4gIG5hbWVGaW5kLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGhhbmRsZUZpbHRlcignbmFtZScsIGUudGFyZ2V0LnZhbHVlLCBjaGFyYWN0ZXJMaXN0KTtcblxuICAgIH1cbiAgKTtcblxuICBob3VzZVNvcnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKHsgdGFyZ2V0IH0pID0+XG4gICAgaGFuZGxlRmlsdGVyKCdob3VzZXMnLCB0YXJnZXQudmFsdWUsIGNoYXJhY3Rlckxpc3QpXG4gICk7XG5cbiAgY2xlYXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBuYW1lRmluZC52YWx1ZSA9ICcnO1xuICAgIGhhbmRsZUZpbHRlcignbmFtZScsICcnLCBjaGFyYWN0ZXJMaXN0KTtcbiAgfSk7XG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG59KTtcbiIsImNvbnN0IHdpbkNoYW5jZSA9IChsaXN0LCBoZXJvKSA9PiB7XG4gIGxldCB3aW5uZXI7XG4gIGNvbnN0IGdyZWF0SG91c2VzID0gQ09OU1RBTlRTLmdyZWF0SG91c2VzO1xuICBsaXN0ID0gbGlzdC5maWx0ZXIoKHsgaG91c2UsIGRpZWQgfSkgPT4gZ3JlYXRIb3VzZXMuaW5jbHVkZXMoaG91c2UubmFtZSkgJiYgZGllZCA9PT0gJ1Vua25vd24nKTtcblxuICBpZiAoIWxpc3QuaW5jbHVkZXMoaGVybykpIHtcbiAgICBpZiAoaGVyby5kaWVkICE9PSAnVW5rbm93bicpIHdpbm5lciA9ICgnU29ycnksIHlvdXIgY2hhcmFjdGVyIGlzIGRlYWQnKTtcbiAgICBpZiAoIWdyZWF0SG91c2VzLmluY2x1ZGVzKGhlcm8uaG91c2UubmFtZSkpIHdpbm5lciA9ICgnU29ycnksIHlvdXIgY2hhcmFjdGVyIGlzIG5vdCBmcm9tIEdyZWF0IEhvdXNlJyk7XG4gIH0gZWxzZSB7XG4gICAgbGlzdCA9IGxpc3QuZmlsdGVyKCh7IHRpdGxlIH0pID0+IHRpdGxlICE9PSAnJyk7XG4gICAgbGlzdC5zb3J0KChhLCBiKSA9PiAoYS5ib3JuIDwgYi5ib3JuKSA/IDEgOiAoKGIuYm9ybiA8IGEuYm9ybikgPyAtMSA6IDApKTtcblxuICAgIGNvbnN0IGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICAgIGxpc3QgPSBsaXN0LmZpbmRJbmRleCgoeyBmdWxsTmFtZSB9KSA9PiBmdWxsTmFtZSA9PT0gaGVyby5mdWxsTmFtZSk7XG5cbiAgICB3aW5uZXIgPSAoKCgoMSAvIGxlbmd0aCkgKiAxMDApICsgTWF0aC5hYnMobGlzdCkpLnRvRml4ZWQoMikgKyAnJScpO1xuICB9XG4gIHJldHVybiB3aW5uZXI7XG59OyJdfQ==
